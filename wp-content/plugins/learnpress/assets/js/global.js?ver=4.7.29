void 0===window.LP&&(window.LP=window.LearnPress={}),function($){function __initSubtabs(){$(".learn-press-subtabs").each(function(){var t=$(this).find("a"),e=null;t.click(function(t){var n=$(this),i=n.attr("href");n.parent().addClass("current").siblings().removeClass("current"),(e=$(i).addClass("current")).siblings().removeClass("current"),t.preventDefault()}).filter(function(){return $(this).attr("href")==window.location.hash}).trigger("click"),e||t.first().trigger("click")})}$.fn.serializeJSON=function(){var unIndexed=$(this).serializeArray(),indexed={},validate=/(\[([a-zA-Z0-9_-]+)?\]?)/g,arrayKeys={},end=!1;return $.each(unIndexed,function(){var that=this,match=this.name.match(/^([0-9a-zA-Z_-]+)/);if(match){var keys=this.name.match(validate),objPath="indexed['"+match[0]+"']";keys?("object"!=typeof indexed[match[0]]&&(indexed[match[0]]={}),$.each(keys,function(i,prop){prop=prop.replace(/\]|\[/g,"");var rawPath=objPath.replace(/'|\[|\]/g,""),objExp="",preObjPath=objPath;""==prop?(void 0==arrayKeys[rawPath]?arrayKeys[rawPath]=0:arrayKeys[rawPath]++,objPath+="['"+arrayKeys[rawPath]+"']"):(isNaN(prop)||(arrayKeys[rawPath]=prop),objPath+="['"+prop+"']");try{i==keys.length-1?(objExp=objPath+"=that.value;",end=!0):(objExp=objPath+"={}",end=!1);var evalString="if( typeof "+objPath+" == 'undefined'){"+objExp+";}else{if(end){if(typeof "+preObjPath+"!='object'){"+preObjPath+"={};}"+objExp+"}}";eval(evalString)}catch(t){console.log("Error:"+t+"\n"+objExp)}})):indexed[match[0]]=this.value}}),indexed},$.fn.tooltip=function(t){return t=$.extend({},{offset:[0,0]},t||{}),$.each(this,function(){var e=$(this),n=e.data("content");if(n&&void 0==e.data("tooltip")){var i=null;e.hover(function(o){i=$('<div class="learn-press-tooltip-bubble"/>').html(n).appendTo($("body")).hide();var s=e.offset();if($.isArray(t.offset)){var a=t.offset[1],r=t.offset[0];$.isNumeric(r)&&(s.left+=r),$.isNumeric(a)&&(s.top+=a)}i.css({top:s.top,left:s.left}),i.fadeIn()},function(){i&&i.remove()}),e.data("tooltip",!0)}})},$.fn.hasEvent=function(t){var e=$(this).data("events");if(void 0===e.LP)return!1;for(i=0;i<e.LP.length;i++)if(e.LP[i].namespace==t)return!0;return!1},$.fn.dataToJSON=function(){var t={};return $.each(this[0].attributes,function(){var e=this.name.match(/^data-(.*)/);e&&(t[e[1]]=this.value)}),t},String.prototype.getQueryVar=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(this);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},String.prototype.addQueryVar=function(t,e){var n=this;return t.match(/\[/)?(n+=n.match(/\?/)?"&":"?",n+=t+"="+e):-1!=n.indexOf("&"+t+"=")||-1!=n.indexOf("?"+t+"=")?n=n.replace(new RegExp(t+"=([^&#]*)","g"),t+"="+e):(n+=n.match(/\?/)?"&":"?",n+=t+"="+e),n},String.prototype.removeQueryVar=function(t){var e=this;t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"([[][^=]*)?=([^&#]*)","g");return e=e.replace(n,"")},0==$.isEmptyObject("")&&($.isEmptyObject=function(t){for(prop in t)if(t.hasOwnProperty(prop))return!1;return!0}),LP.MessageBox={$block:null,$window:null,events:{},instances:[],instance:null,quickConfirm:function(t,e){var n=$(t);$("[learn-press-quick-confirm]").each(function(){($ins=$(this).data("quick-confirm"))&&(console.log($ins),$ins.destroy())}),!n.attr("learn-press-quick-confirm")&&n.attr("learn-press-quick-confirm","true").data("quick-confirm",new function(t,e){var n=$(t),i=$('<span class="learn-press-quick-confirm"></span>').insertAfter(n),o=$(t).position()||{left:0,top:0},s=null,a=null,r=3,c=function(){i.fadeOut("fast",function(){$(this).remove(),i.parent().css("position","")}),n.removeAttr("learn-press-quick-confirm").data("quick-confirm",void 0),l()},l=function(){a&&clearInterval(a),s&&clearInterval(s)},d=function(){s=setInterval(function(){0==--r&&(c.call(i[0]),$.isFunction(e.onCancel)&&e.onCancel(e.data),l()),i.find("span").html(" ("+r+")")},1e3),a=setInterval(function(){n.is(":visible")&&"hidden"!=n.css("visibility")||(l(),i.remove(),i.parent().css("position",""),$.isFunction(e.onCancel)&&e.onCancel(e.data))},350)};e=$.extend({message:"",data:null,onOk:null,onCancel:null,offset:{top:0,left:0}},e||{}),i.html(e.message||n.attr("data-confirm-remove")||"Are you sure?").append("<span> ("+r+")</span>").css({}),i.click(function(){$.isFunction(e.onOk)&&e.onOk(e.data),c()}).hover(function(){l()},function(){d()}),i.css({left:o.left+n.outerWidth()-i.outerWidth()+e.offset.left,top:o.top+n.outerHeight()+e.offset.top+5}).hide().fadeIn("fast"),d(),this.destroy=function(){i.remove(),n.removeAttr("learn-press-quick-confirm").data("quick-confirm",void 0),l()}}(t,e))},show:function(t,e){$.proxy(function(){e=$.extend({title:"",buttons:"",events:!1,autohide:!1,message:t,data:!1,id:LP.uniqueId(),onHide:null},e||{}),this.instances.push(e),this.instance=e;$(document);var n=$(document.body);this.$block||(this.$block=$('<div id="learn-press-message-box-block"></div>').appendTo(n)),this.$window||(this.$window=$('<div id="learn-press-message-box-window"><div id="message-box-wrap"></div> </div>').insertAfter(this.$block),this.$window.click(function(){})),this._createWindow(t,e.title,e.buttons),this.$block.show(),this.$window.show().attr("instance",e.id),$(window).bind("resize.message-box",$.proxy(this.update,this)).bind("scroll.message-box",$.proxy(this.update,this)),this.update(!0),e.autohide&&setTimeout(function(){LP.MessageBox.hide(),$.isFunction(e.onHide)&&e.onHide.call(LP.MessageBox,e)},e.autohide)},this)()},blockUI:function(t){t=(!1!==t?t||"Wait a moment":"")+'<div class="message-box-animation"></div>',this.show(t)},hide:function(t,e){e?this._removeInstance(e.id):this.instance&&this._removeInstance(this.instance.id),0==this.instances.length?(this.$block&&this.$block.hide(),this.$window&&this.$window.hide(),$(window).unbind("resize.message-box",this.update).unbind("scroll.message-box",this.update)):this.instance&&this._createWindow(this.instance.message,this.instance.title,this.instance.buttons)},update:function(t){var e=this,n=this.$window.find("#message-box-wrap"),i=n.data("timer"),o=function(){LP.Hook.doAction("learn_press_message_box_before_resize",e);var t=n.find(".message-box-content").css("height","").css("overflow","hidden"),i=(n.outerWidth(),n.outerHeight()),o=t.height(),s=$(window).height();n.offset().top;o>s-50?(t.css({height:s-25}),i=n.outerHeight()):t.css("height","").css("overflow",""),n.css({marginTop:($(window).height()-i)/2}),LP.Hook.doAction("learn_press_message_box_resize",i,e)};t&&o(),i&&clearTimeout(i),i=setTimeout(o,250)},_removeInstance:function(t){for(var e=0;e<this.instances.length;e++)if(this.instances[e].id==t){this.instances.splice(e,1);var n=this.instances.length;n?(this.instance=this.instances[n-1],this.$window.attr("instance",this.instance.id)):(this.instance=!1,this.$window.removeAttr("instance"));break}},_getInstance:function(t){for(var e=0;e<this.instances.length;e++)if(this.instances[e].id==t)return this.instances[e]},_createWindow:function(t,e,n){var i=this.$window.find("#message-box-wrap").html("");if(e&&i.append('<h3 class="message-box-title">'+e+"</h3>"),i.append($('<div class="message-box-content"></div>').html(t)),n){var o=$('<div class="message-box-buttons"></div>');switch(n){case"yesNo":o.append(this._createButton(LP_Settings.localize.button_yes,"yes")),o.append(this._createButton(LP_Settings.localize.button_no,"no"));break;case"okCancel":o.append(this._createButton(LP_Settings.localize.button_ok,"ok")),o.append(this._createButton(LP_Settings.localize.button_cancel,"cancel"));break;default:o.append(this._createButton(LP_Settings.localize.button_ok,"ok"))}i.append(o)}},_createButton:function(t,e){var n=$('<button type="button" class="button message-box-button message-box-button-'+e+'">'+t+"</button>"),i="on"+(e.substr(0,1).toUpperCase()+e.substr(1));return n.data("callback",i).click(function(){var t=$(this).data("instance"),e=t.events[$(this).data("callback")];if("function"==$.type(e)){if(!1===e.apply(LP.MessageBox,[t]))return;LP.MessageBox.hide(null,t)}else LP.MessageBox.hide(null,t)}).data("instance",this.instance),n}},LP.Hook={hooks:{action:{},filter:{}},addAction:function(t,e,n,i){return this.addHook("action",t,e,n,i),this},addFilter:function(t,e,n,i){return this.addHook("filter",t,e,n,i),this},doAction:function(t){return this.doHook("action",t,arguments),this},applyFilters:function(t){return this.doHook("filter",t,arguments)},removeAction:function(t,e){return this.removeHook("action",t,e),this},removeFilter:function(t,e,n){return this.removeHook("filter",t,e,n),this},addHook:function(t,e,n,i,o){void 0==this.hooks[t][e]&&(this.hooks[t][e]=[]);var s=this.hooks[t][e];return void 0==o&&(o=e+"_"+s.length),this.hooks[t][e].push({tag:o,callable:n,priority:i}),this},doHook:function(t,e,n){if(n=Array.prototype.slice.call(n,1),void 0!=this.hooks[t][e]){var i,o=this.hooks[t][e];o.sort(function(t,e){return t.priority-e.priority});for(var s=0;s<o.length;s++)"function"!=typeof(i=o[s].callable)&&(i=window[i]),"action"==t?i.apply(null,n):n[0]=i.apply(null,n)}return"filter"==t?n[0]:this},removeHook:function(t,e,n,i){if(void 0!=this.hooks[t][e])for(var o=this.hooks[t][e],s=o.length-1;s>=0;s--)void 0!=i&&i!=o[s].tag||void 0!=n&&n!=o[s].priority||o.splice(s,1);return this}},LP=$.extend({setUrl:function(t,e,n){t&&(history.pushState({},n,t),LP.Hook.doAction("learn_press_set_location_url",t))},toggleGroupSection:function(t,e){var n=$(t);n.hasClass("hide-if-js")&&n.hide().removeClass("hide-if-js"),n.removeClass("hide-if-js").slideToggle(function(){$(this).is(":visible")?$(e).addClass("toggle-on").removeClass("toggle-off"):$(e).addClass("toggle-off").removeClass("toggle-on")})},overflow:function(t,e){var n=$(t),i=n.css("overflow");e?n.css("overflow",e).data("overflow",i):n.css("overflow",n.data("overflow"))},getUrl:function(){return window.location.href},addQueryVar:function(t,e,n){return(void 0==n?window.location.href:n).addQueryVar(t,e)},removeQueryVar:function(t,e){return(void 0==e?window.location.href:e).removeQueryVar(t)},reload:function(t){t||(t=window.location.href),window.location.href=t},parseResponse:function(t,e){var n=t.match(/<!-- LP_AJAX_START -->(.*)<!-- LP_AJAX_END -->/);return n&&(t=n[1]),"json"==(e||"json")?this.parseJSON(t):t},parseJSON:function(t){var e=t.match(/<!-- LP_AJAX_START -->(.*)<!-- LP_AJAX_END -->/);try{t=e?$.parseJSON(e[1]):$.parseJSON(t)}catch(e){LP.log(e),t={}}return t},ajax:function(t){var e=t.type||"post",n=t.dataType||"json",i=t.action?$.extend(t.data,{"lp-ajax":t.action}):t.data,o=t.beforeSend||function(){},s=t.url||window.location.href;$.ajax({data:i,url:s,type:e,dataType:"html",beforeSend:o.apply(null,t),success:function(e){var i=LP.parseResponse(e,n);$.isFunction(t.success)&&t.success(i,e)},error:function(){$.isFunction(t.error)&&t.error.apply(null,LP.funcArgs2Array())}})},doAjax:function(t){var e=t.type||"post",n=t.dataType||"json",i=(void 0==t.prefix||"learnpress_")+t.action,o=t.action?$.extend(t.data,{action:i}):t.data;$.ajax({data:o,url:t.url||window.location.href,type:e,dataType:"html",success:function(e){var i=LP.parseResponse(e,n);$.isFunction(t.success)&&t.success(i,e)},error:function(){$.isFunction(t.error)&&t.error.apply(null,LP.funcArgs2Array())}})},funcArgs2Array:function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e},addFilter:function(t,e){var n=$(document),i="LP."+t;return n.on(i,e),LP.log(n.data("events")),this},applyFilters:function(){var t=$(document),e=arguments[0],n=this.funcArgs2Array(arguments);return t.hasEvent(e)?(n[0]="LP."+e,t.triggerHandler.apply(t,n)):n[1]},addAction:function(t,e){return this.addFilter(t,e)},doAction:function(){var t=$(document),e=arguments[0],n=this.funcArgs2Array(arguments);t.hasEvent(e)&&(n[0]="LP."+e,t.trigger.apply(t,n))},toElement:function(t,e){0!=$(t).length&&(e=$.extend({delay:300,duration:"slow",offset:50,callback:null},e||{}),$("body, html").fadeIn(10).delay(e.delay).animate({scrollTop:$(t).offset().top-e.offset},e.duration,e.callback))},uniqueId:function(t,e){void 0===t&&(t="");var n,i=function(t,e){return t=parseInt(t,10).toString(16),e<t.length?t.slice(t.length-e):e>t.length?Array(e-t.length+1).join("0")+t:t};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,n=t,n+=i(parseInt((new Date).getTime()/1e3,10),8),n+=i(this.php_js.uniqidSeed,5),e&&(n+=(10*Math.random()).toFixed(8).toString()),n},log:function(){for(var t=0,e=arguments.length;t<e;t++)console.log(arguments[t])},blockContent:function(){0==$("#learn-press-block-content").length&&$(LP.template("learn-press-template-block-content",{})).appendTo($("body")),LP.hideMainScrollbar().addClass("block-content"),$(document).trigger("learn_press_block_content")},unblockContent:function(){setTimeout(function(){LP.showMainScrollbar().removeClass("block-content"),$(document).trigger("learn_press_unblock_content")},350)},hideMainScrollbar:function(t){t||(t="html, body");var e=$(t);return e.each(function(){var t=$(this),e=t.css("overflow");t.css("overflow","hidden").attr("overflow",e)}),e},showMainScrollbar:function(t){t||(t="html, body");var e=$(t);return e.each(function(){var t=$(this),e=t.attr("overflow");t.css("overflow",e).removeAttr("overflow")}),e},template:_.memoize(function(t,e){var n,i={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"},o=function(e){return(n=n||_.template($("#"+t).html(),null,i))(e)};return e?o(e):o},function(t,e){return t+"-"+JSON.stringify(e)}),alert:function(t,e){var n="",i="";"string"==typeof t?i=t:(void 0!==t.title&&(n=t.title),void 0!==t.message&&(i=t.message)),$.alerts.alert(i,n,function(t){LP._on_alert_hide(),e&&e(t)}),this._on_alert_show()},confirm:function(t,e){var n="",i="";"string"==typeof t?i=t:(void 0!==t.title&&(n=t.title),void 0!==t.message&&(i=t.message)),$.alerts.confirm(i,n,function(t){LP._on_alert_hide(),e&&e(t)}),this._on_alert_show()},_on_alert_show:function(){var t=$("#popup_container");$('<span id="popup_container_placeholder" />').insertAfter(t).data("xxx",t);t.stop().css("top","-=50").css("opacity","0").animate({top:"+=50",opacity:1},250)},_on_alert_hide:function(){var t=$("#popup_container_placeholder"),e=t.data("xxx");e&&e.replaceWith(t),e.appendTo($(document.body)),e.stop().animate({top:"+=50",opacity:0},250,function(){$(this).remove()})},sendMessage:function(t,e,n,i){$.isPlainObject(t)&&(t=JSON.stringify(t)),e=e||window,n=n||"*",e.postMessage(t,n,i)},receiveMessage:function(t,e){var n=t.origin||t.originalEvent.origin,i=t.data||t.originalEvent.data||"";("string"==typeof i||i instanceof String)&&0==i.indexOf("{")&&(i=LP.parseJSON(i)),LP.Hook.doAction("learn_press_receive_message",i,n)}},LP),$.fn.rows=function(){var t=$(this).height(),e=$(this).css("line-height").replace("px","");return $(this).attr({height:t,"line-height":e}),Math.floor(t/parseInt(e))},$.fn.checkLines=function(t){return this.each(function(){var e=$(this).rows();t.call(this,e)})},$.fn.findNext=function(t){var e=$(t),n=this.first(),i=e.index(n),o=e.eq(i+1);return!!o.length&&o},$.fn.findPrev=function(t){var e=$(t),n=this.first(),i=e.index(n),o=e.eq(i-1);return!!o.length&&o},$.each(["progress"],function(t,e){$.Tween.propHooks[e]={get:function(t){return $(t.elem).css("transform")},set:function(t){t.now<180?$(this).find(".progress-circle").removeClass("gt-50"):$(this).find(".progress-circle").addClass("gt-50"),$(t.elem).find(".fill").css({transform:"rotate("+t.end+"deg)"})}}}),$.fn.progress=function(t){return this.each(function(){var e=parseInt(t/100*360),n=$(this);e<180?n.find(".progress-circle").removeClass("gt-50"):n.find(".progress-circle").addClass("gt-50"),n.find(".fill").css({transform:"rotate("+e+"deg)"})})},$(document).ready(function(){void 0!==$.alerts&&($.alerts.overlayColor="#000",$.alerts.overlayOpacity=.5),$("body").on("click",".learn-press-nav-tabs li a",function(t){t.preventDefault();var e=$(this);e.closest("li").addClass("active").siblings().removeClass("active"),$(e.attr("data-tab")).addClass("active").siblings().removeClass("active")}),$(".learn-press-nav-tabs li.active a").trigger("click"),function(){var t=null,e=function(){$(".auto-check-lines").checkLines(function(t){t>1?$(this).removeClass("single-lines"):$(this).addClass("single-lines"),$(this).attr("rows",t)})};$(window).on("resize.check-lines",function(){t?(t&&clearTimeout(t),t=setTimeout(e,300)):e()})}(),$(document).on("click",'[data-block-content="yes"]',function(){LP.blockContent()}),$(".learn-press-tooltip, .lp-passing-conditional").tooltip({offset:[24,24]}),$(".learn-press-icon").tooltip({offset:[30,30]}),$(".learn-press-message[data-autoclose]").each(function(){var t=$(this),e=parseInt(t.data("autoclose"));e&&setTimeout(function(t){t.fadeOut()},e,t)}),window.addEventListener("message",LP.receiveMessage,!1)}),LearnPress=LP}(jQuery);